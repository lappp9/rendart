
$(function() {

  var images, lastImage, nextImage;
  var currentImage = 0;

  window.images = new Array();

  function preload() {
    var i = 0;
    for (i = 0; i < preload.arguments.length; i++) {
      window.images[i] = new Image();
      window.images[i].src = preload.arguments[i];
    }
  }

  preload(
    "/assets/cequel.jpg", 
    "/assets/cequel3.jpg", 
    "/assets/cequel7.jpg", 
    "/assets/ameren2.jpg", 
    "/assets/ameren.jpg", 
    "/assets/residential5.jpg", 
    "/assets/residential.jpg", 
    "/assets/cozzens3.jpg", 
    "/assets/residential6.jpg", 
    "/assets/sketch4.JPG", 
    "/assets/station4.jpg", 
    "/assets/physical.JPG", 
    "/assets/ka.jpg"
  )
  
  //Set a drop shadow
  function setShadow(percent) {
      var min = 20, max = 100;
        var val = (max - min) * percent + min;
          $('#content').css('box-shadow', 'inset 0 -'+val+'px '+val+'px rgba(0,0,0,'+((percent * .8)+.2)+')');
  }

  $(document).scroll(function() {
      var max = window.innerHeight, y = window.scrollY;

        setShadow( y / max );
  });

  lastImage = function() {
    currentImage--;
    if (currentImage === -1) {
      currentImage = 12;
    }
    return currentImage;
  };

  //Scroll through the images 
  nextImage = function() {
    currentImage++;
    if (currentImage === 13) {
      currentImage = 0;
    }
    return currentImage;
  };

  $("#left").click(function(e) {
    e.preventDefault();
    $("#content").css("background-image", "url(" + window.images[lastImage()].src + ")");
  });

  $("#right").click(function(e) {
    e.preventDefault();
    $("#content").css("background-image", "url(" + window.images[nextImage()].src + ")");
  });

  //Allow arrow keys to scroll left and right
  $(document).keydown(function(e) {
    if (e.keyCode === 39) {
      $("#right").click();
      return false;
    }
  });

  $(document).keydown(function(e) {
    if (e.keyCode === 37) {
      $("#left").click();
      return false;
    }
  });

});
